{"version":3,"sources":["webpack:///./src/views/marketing-registry/AddCasePage.vue?35f1","webpack:///./src/views/marketing-registry/AddCasePage.vue?ea45","webpack:///src/views/marketing-registry/AddCasePage.vue","webpack:///./src/views/marketing-registry/AddCasePage.vue?1335","webpack:///./src/views/marketing-registry/AddCasePage.vue","webpack:///./src/views/marketing-registry/AddCasePage.vue?e0f5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","staticClass","attrs","size","slot","_v","_s","expMetaData","name","params","campaign_id","$route","data_campaign_id","creation_date","app_type","on","handleChange","model","value","callback","$$v","activeNames","expression","nativeOn","$event","addNewExp","ref","form","FormRules","modelData","selsExp","openAnnotation","scopedSlots","_u","key","fn","scope","row","expName","$set","trim","exposureNum","inputChange","delModelHead","$index","length","addModelHead","_e","staticRenderFns","data","groupData","apiListLoading","baseExpSelected","oldNum","ABTypeSelected","activeIndex","searchApiList","searchApiListG","radio","page","total","searchApiVisible","ApiList","showCheck","sels","interrelateObjects","abname","description","required","message","trigger","altlist","methods","obj","console","log","headers","push","index","splice","handleSelect","keyPath","handleCurrentChangeApi","val","getApiList","getExpMeta","self","$","ajax","type","url","test","async","ab_id","Authorization","JSON","parse","sessionStorage","getItem","timeout","success","code","$message","error","msg","center","_list","param","project_id","Number","handleCurrentChange","currentRow","selsChange","_this","forEach","item","Array","from","Set","_this2","$refs","validate","valid","$confirm","then","stringify","expRegData","$router","catch","changABType","h","_ref","column","labelClassName","label","watch","handler","curVal","oldVal","check","deep","computed","exposureNumSelected","get","set","newValue","replace","mounted","searchApiListVisible","component"],"mappings":"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","file":"js/chunk-53fe7202.025cb010.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCasePage.vue?vue&type=style&index=1&id=6361bdfc&prod&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticStyle:{\"margin-left\":\"15px\",\"margin-right\":\"15px\"}},[_c('el-divider'),_c('el-descriptions',{staticClass:\"margin-top\",attrs:{\"title\":\"\",\"column\":3,\"size\":_vm.size}},[_c('template',{slot:\"title\"},[_c('span',[_vm._v(_vm._s(_vm.expMetaData.name))])]),_c('template',{slot:\"extra\"},[_c('router-link',{staticStyle:{\"text-decoration\":\"none\",\"color\":\"aliceblue\"},attrs:{\"to\":{ name: '活动管理', params: {campaign_id: this.$route.params.campaign_id}}}},[_c('el-button',{staticClass:\"return-list\"},[_c('i',{staticClass:\"el-icon-arrow-left\",staticStyle:{\"margin-right\":\"5px\"}}),_vm._v(\"返回活动管理\")])],1)],1),_c('el-descriptions-item',{attrs:{\"label\":\"所属活动ID\"}},[_vm._v(_vm._s(_vm.expMetaData.data_campaign_id))]),_c('el-descriptions-item',{attrs:{\"label\":\"创建时间\"}},[_vm._v(_vm._s(_vm.expMetaData.creation_date))]),_c('el-descriptions-item',{attrs:{\"label\":\"实验类型\"}},[_c('el-tag',{attrs:{\"size\":\"small\"}},[_vm._v(_vm._s(_vm.expMetaData.app_type))])],1)],2),_c('el-collapse',{staticStyle:{\"margin-bottom\":\"20px\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},[_c('el-collapse-item',{attrs:{\"title\":\"实验组创建及策略配置\",\"name\":\"1\"}},[_c('el-col',{staticClass:\"toolbar\",staticStyle:{\"padding-bottom\":\"0px\"},attrs:{\"span\":24}},[_c('router-link',{staticStyle:{\"text-decoration\":\"none\",\"color\":\"aliceblue\"},attrs:{\"to\":{ name: '活动管理', params: {campaign_id: this.$route.params.campaign_id}}}},[_c('el-button',{staticClass:\"return-list\",staticStyle:{\"float\":\"right\"}},[_vm._v(\"取消\")])],1),_c('el-button',{staticClass:\"return-list\",staticStyle:{\"float\":\"right\",\"margin-right\":\"15px\"},attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.addNewExp($event)}}},[_vm._v(\"保存\")])],1),_c('br'),_c('el-col',{staticStyle:{\"padding-bottom\":\"20px\"},attrs:{\"span\":24}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.FormRules}},[_c('div',{staticStyle:{\"border\":\"1px solid #e6e6e6\",\"margin-bottom\":\"10px\",\"padding\":\"15px\"}},[_c('p',{staticStyle:{\"margin-bottom\":\"0\"}},[_vm._v(\"测试您的产品的多种变化。\")]),_c('p',[_vm._v(\" 注意：确保你的曝光率加起来是100%，并且你选择了一个基本的变体（出错的时候会统统发送给它）。\")]),_c('br'),_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":22}},[_c('el-table',{ref:\"multipleHeadTable\",attrs:{\"data\":_vm.form.modelData,\"highlight-current-row\":\"\"},on:{\"selection-change\":_vm.selsExp}},[_c('el-table-column',{attrs:{\"label-class-name\":\"出错时将只向选择实例发送请求\",\"render-header\":_vm.openAnnotation,\"type\":\"selection\",\"min-width\":\"5%\",\"label\":\"默认\"}}),_c('el-table-column',{attrs:{\"prop\":\"expName\",\"label\":\"曝光实例\",\"min-width\":\"30%\",\"label-class-name\":\"曝光的实验实例名称\",\"render-header\":_vm.openAnnotation},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"value\":scope.row.expName,\"placeholder\":\"请输入实例名称\"},model:{value:(scope.row.expName),callback:function ($$v) {_vm.$set(scope.row, \"expName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"scope.row.expName\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"exposureNum\",\"label\":\"曝光率(%)\",\"min-width\":\"20%\",\"label-class-name\":\"各实例曝光比例\",\"render-header\":_vm.openAnnotation},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"value\":scope.row.exposureNum,\"type\":\"number\",\"placeholder\":\"请输入曝光率\"},on:{\"input\":function($event){return _vm.inputChange(scope.row)}},model:{value:(scope.row.exposureNum),callback:function ($$v) {_vm.$set(scope.row, \"exposureNum\", $$v)},expression:\"scope.row.exposureNum\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"已部署模型\",\"min-width\":\"30%\",\"label-class-name\":\"根据增强模型动态生成选择模型并返回结果。如果指定了 '无模型'，则返回实例名称\",\"render-header\":_vm.openAnnotation},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"value\":scope.row.name,\"placeholder\":\"请输入模型\"},model:{value:(scope.row.name),callback:function ($$v) {_vm.$set(scope.row, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"scope.row.name\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"\",\"min-width\":\"10%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-delete\",staticStyle:{\"font-size\":\"30px\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.delModelHead(scope.$index)}}})]}}])}),_c('el-table-column',{staticStyle:{\"margin-right\":\"6px\"},attrs:{\"label\":\"\",\"min-width\":\"15%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.$index===(_vm.form.modelData.length-1))?_c('el-button',{staticClass:\"el-icon-plus\",attrs:{\"size\":\"mini\"},on:{\"click\":_vm.addModelHead}}):_vm._e()]}}])})],1)],1)],1)],1)])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section style=\"margin-left:15px;margin-right:15px;\">\n    <el-divider></el-divider>\n    <el-descriptions class=\"margin-top\" title=\"\" :column=\"3\" :size=\"size\">\n      <template slot=\"title\">\n      <span>{{ expMetaData.name }}</span>\n      </template>\n    <template slot=\"extra\">\n      <router-link :to=\"{ name: '活动管理', params: {campaign_id: this.$route.params.campaign_id}}\" style=\"text-decoration: none;color: aliceblue;\">\n          <el-button class=\"return-list\"><i class=\"el-icon-arrow-left\" style=\"margin-right: 5px\"></i>返回活动管理</el-button>\n      </router-link>\n    </template>\n    <el-descriptions-item label=\"所属活动ID\">{{expMetaData.data_campaign_id}}</el-descriptions-item>\n    <el-descriptions-item label=\"创建时间\">{{ expMetaData.creation_date }}</el-descriptions-item>\n    <el-descriptions-item label=\"实验类型\"><el-tag size=\"small\">{{ expMetaData.app_type }}</el-tag></el-descriptions-item>\n  </el-descriptions>\n\n  <el-collapse v-model=\"activeNames\" @change=\"handleChange\" style=\"margin-bottom:20px\">\n  <el-collapse-item title=\"实验组创建及策略配置\" name=\"1\">\n<!--工具条-->\n<el-col :span=\"24\" class=\"toolbar\" style=\"padding-bottom: 0px;\">\n  <router-link :to=\"{ name: '活动管理', params: {campaign_id: this.$route.params.campaign_id}}\" style='text-decoration: none;color: aliceblue;'>\n    <el-button class=\"return-list\" style=\"float: right\">取消</el-button>\n  </router-link>\n  <el-button class=\"return-list\" type=\"primary\" style=\"float: right; margin-right: 15px\" @click.native=\"addNewExp\">保存</el-button>\n</el-col>\n <br>\n <el-col :span=\"24\" style=\"padding-bottom: 20px;\">\n      <el-form :model=\"form\" ref=\"form\" :rules=\"FormRules\">\n          <div style=\"border: 1px solid #e6e6e6;margin-bottom: 10px;padding:15px\">\n              <p style=\"margin-bottom: 0;\">测试您的产品的多种变化。</p>\n              <p> 注意：确保你的曝光率加起来是100%，并且你选择了一个基本的变体（出错的时候会统统发送给它）。</p>\n              <br>\n\n              <el-row :gutter=\"10\">\n                  <el-col :span='22'>\n                   <el-table :data=\"form.modelData\" highlight-current-row ref=\"multipleHeadTable\"\n                             @selection-change=\"selsExp\">\n                          <el-table-column label-class-name=\"出错时将只向选择实例发送请求\"\n                                           :render-header=\"openAnnotation\"\n                                           type=\"selection\"\n                                           min-width=\"5%\" label=\"默认\">\n                          </el-table-column>\n                          <el-table-column  prop=\"expName\"\n                                           label=\"曝光实例\"\n                                           min-width=\"30%\"\n                                           label-class-name=\"曝光的实验实例名称\"\n                                           :render-header=\"openAnnotation\"\n                                           >\n                              <template slot-scope=\"scope\">\n                                  <el-input v-model.trim=\"scope.row.expName\" :value=\"scope.row.expName\" placeholder=\"请输入实例名称\"></el-input>\n                              </template>\n                          </el-table-column>\n                          <el-table-column prop=\"exposureNum\"\n                                           label=\"曝光率(%)\" min-width=\"20%\"\n                                           label-class-name=\"各实例曝光比例\"\n                                           :render-header=\"openAnnotation\">\n                              <template slot-scope=\"scope\">\n                                  <el-input v-model=\"scope.row.exposureNum\"\n                                            :value=\"scope.row.exposureNum\"\n                                            type=\"number\"\n                                            @input=\"inputChange(scope.row)\"\n                                            placeholder=\"请输入曝光率\"></el-input>\n                              </template>\n                          </el-table-column>\n                          <el-table-column  prop=\"name\"\n                                           label=\"已部署模型\" min-width=\"30%\"\n                                           label-class-name=\"根据增强模型动态生成选择模型并返回结果。如果指定了 '无模型'，则返回实例名称\"\n                                           :render-header=\"openAnnotation\"\n                                           >\n                              <template slot-scope=\"scope\">\n                                  <el-input v-model.trim=\"scope.row.name\" :value=\"scope.row.name\" placeholder=\"请输入模型\"></el-input>\n                              </template>\n                          </el-table-column>\n                          <el-table-column label=\"\" min-width=\"10%\">\n                              <template slot-scope=\"scope\">\n                                  <i class=\"el-icon-delete\" style=\"font-size:30px;cursor:pointer;\" @click=\"delModelHead(scope.$index)\"></i>\n                              </template>\n                          </el-table-column>\n                          <el-table-column label=\"\" min-width=\"15%\" style=\"margin-right:6px\">\n                              <template slot-scope=\"scope\">\n                                  <el-button v-if=\"scope.$index===(form.modelData.length-1)\" size=\"mini\" class=\"el-icon-plus\" @click=\"addModelHead\"></el-button>\n                              </template>\n                          </el-table-column>\n                      </el-table>\n                  </el-col>\n              </el-row>\n      </div>\n  </el-form>\n</el-col>\n  </el-collapse-item>\n</el-collapse>\n\n  </section>\n</template>\n<script>\nimport { test } from '@/api/api'\nimport $ from 'jquery'\nexport default {\n  data () {\n    return {\n      expMetaData: {},\n      activeNames: ['1'],\n      groupData: [],\n      apiListLoading: false,\n      baseExpSelected: [],\n      oldNum: 50,\n      ABTypeSelected: 'mlExp',\n      activeIndex: '',\n      searchApiList: [],\n      searchApiListG: {},\n      radio: 'mlExp',\n      page: 1,\n      total: 0,\n      searchApiVisible: false,\n      ApiList: [],\n      showCheck: false,\n      sels: [], // 列表选中列\n      interrelateObjects: '',\n      form: {\n        abname: '',\n        description: '',\n        modelData: [{ expName: '', name: 'No Model', exposureNum: 50 }]\n      },\n      FormRules: {\n        name: [{ required: true, message: '请输入实验用例名称', trigger: 'blur' }],\n        altlist: [{ required: true, message: '请输入待测试的模型列表', trigger: 'blur' }]\n      }\n    }\n  },\n  methods: {\n    inputChange (obj) {\n      console.log(obj, 'obj')\n    },\n    addModelHead () {\n      let headers = { name: 'No Model', exposureNum: 50, expName: 'control' }\n      this.form.modelData.push(headers)\n    // let rows = [this.form.modelData[this.form.modelData.length - 1]]\n    // this.form.modelData[this.form.modelData.length-1].exposureNum=50\n    // this.toggleHeadSelection(rows)\n    },\n    delModelHead (index) {\n      if (this.form.modelData.length !== 1) {\n        this.form.modelData.splice(index, 1)\n      }\n    },\n    handleSelect (key, keyPath) {\n      this.activeIndex = key\n      console.log(this.activeIndex)\n    },\n    handleCurrentChangeApi (val) {\n    // console.log(this.groupData[this.activeIndex][\"id\"]);\n      if (this.activeIndex['id']) {\n        this.page = val\n        this.getApiList()\n      // this.getApiList(this.groupData[this.activeIndex][\"id\"])\n      } else {\n        this.page = val\n        this.getApiList()\n      }\n    },\n    // 实验元数据\n    getExpMeta () {\n      let self = this\n      $.ajax({\n        type: 'get',\n        url: test + '/api/campaigns/get_exp_metadata',\n        async: true,\n        data: { ab_id: this.$route.params.ab_id,\n          campaign_id: this.$route.params.campaign_id },\n        headers: {\n          Authorization: 'Token ' + JSON.parse(sessionStorage.getItem('token'))\n        },\n        timeout: 5000,\n        success: function (data) {\n          if (data.code === '999999') {\n            self.expMetaData = data.data.data\n            console.log(self.expMetaData, 'this.expMetaData')\n          } else {\n            self.$message.error({\n              message: data.msg,\n              center: true\n            })\n          }\n        }\n      })\n    },\n    getApiList (_list) {\n      this.apiListLoading = true\n      let self = this\n      let param = { project_id: Number(this.$route.params.project_id), page: self.page }\n      if (_list) {\n        param['apiGroupLevelFirst_id'] = Number(_list)\n      }\n      $.ajax({\n        type: 'get',\n        url: test + '/api/api/api_list',\n        async: true,\n        data: param,\n        headers: {\n          Authorization: 'Token ' + JSON.parse(sessionStorage.getItem('token'))\n        },\n        timeout: 5000,\n        success: function (data) {\n          self.apiListLoading = false\n          if (data.code === '999999') {\n            self.searchApiList = data.data.data\n            self.total = data.data.total\n            console.log(self.searchApiList, 'searchApiList')\n          } else {\n            self.$message.error({\n              message: data.msg,\n              center: true\n            })\n          }\n        }\n      })\n    },\n    handleCurrentChange (val) {\n      this.currentRow = val\n    },\n    selsExp (sels) {\n      this.baseExpSelected = sels\n    },\n    selsChange (sels) {\n      this.sels = sels\n      if (sels.length === 1 && this.form.modelData[0].expName === '') {\n      // 删除第一个空记录\n        this.form.modelData.splice(0, 1)\n      }\n      sels.forEach((item) => {\n        item.exposureNum = 50\n        item.expName = item.name\n        this.form.modelData.push(item)\n        this.form.modelData = Array.from(new Set(this.form.modelData))\n      })\n      console.log(this.sels, 'this.sels')\n    },\n    addNewExp () {\n      let self = this\n      console.log(self.form, 'sd', self.baseExpSelected, 'sfkk', self.form.modelData)\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          let self = this\n          this.$confirm('确认提交实验吗？', '提示', {}).then(() => {\n            let param = JSON.stringify({\n              campaign_id: Number(self.$route.params.campaign_id),\n              ab_id: Number(self.$route.params.ab_id),\n              // abname: self.form.abname,\n              expRegData: self.form.modelData,\n              baseExpSelected: self.baseExpSelected\n              // description: self.form.description// \"A/B exp create\"\n            })\n            $.ajax({\n              type: 'post',\n              url: test + '/api/campaigns/add_exp_alt',\n              async: true,\n              data: param,\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: 'Token ' + JSON.parse(sessionStorage.getItem('token'))\n              },\n              timeout: 5000,\n              success: function (data) {\n                if (data.code === '999999') {\n                  self.$router.push({ name: '活动管理',\n                    params: { campaign_id: self.$route.params.campaign_id,\n                      ab_id: self.$route.params.ab_id } })\n                  self.$message({\n                    message: '保存成功',\n                    center: true,\n                    type: 'success'\n                  })\n                } else {\n                  self.$message.error({\n                    message: data.msg,\n                    center: true\n                  })\n                }\n              }\n            })\n          }).catch(() => {\n          })\n        }\n      })\n    },\n    // addApi: function () {\n    // header 需要\"Content-Type\": \"application/json\"\n    changABType (val) {\n      this.ABTypeSelected = val\n      console.log(val, 'abval')\n    },\n    handleChange (val) {\n    },\n    openAnnotation: function (h, { column, $index }) {\n      return (\n        <el-tooltip class=\"item\" effect=\"dark\" content={column.labelClassName} placement=\"top\">\n          <span>{column.label}</span>\n        </el-tooltip>\n      )\n    }\n  },\n  watch: {\n    radio (val) {\n      this.changABType(val)\n    },\n    form: {\n    // 注意：当观察的数据为对象或数组时，curVal和oldVal是相等的，因为这两个形参指向的是同一个数据对象\n      handler (curVal, oldVal) {\n        if (curVal.check === 'no_check') {\n          this.showCheck = false\n        } else {\n          this.showCheck = true\n        }\n      },\n      deep: true\n    }\n  },\n  computed: {\n    exposureNumSelected: {\n      get: function () {\n        return this.oldNum\n      },\n      set: function (newValue) {\n        this.oldNum = newValue.replace(/[^\\d]/g, '')\n      }\n    }\n  },\n  mounted () {\n    this.getExpMeta()\n    this.searchApiListVisible = true\n    // this.getApiGroup()\n    // this.getApiList()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  p {\n      margin: 0 0 10px;\n  }\n  .return-list {\n      margin-top: 0px;\n      margin-bottom: 10px;\n      border-radius: 0px;\n  }\n  .head-class {\n      font-size: 17px\n  }\n  .parameter-a {\n      display: block;\n  }\n  .parameter-b {\n      display: none;\n  }\n  .selectInput {\n      position: absolute;\n      /*margin-left: 7px;*/\n      padding-left: 9px;\n      width: 180px;\n      /*border-radius:0px;*/\n      /*height: 38px;*/\n      left: 1px;\n      border-right: 0px;\n  }\n</style>\n<style lang=\"scss\">\n  .selectInput{\n      input{\n          border-right: 0px;\n          border-radius: 4px 0px 0px 4px;\n      }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCasePage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCasePage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddCasePage.vue?vue&type=template&id=6361bdfc&scoped=true&\"\nimport script from \"./AddCasePage.vue?vue&type=script&lang=js&\"\nexport * from \"./AddCasePage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddCasePage.vue?vue&type=style&index=0&id=6361bdfc&prod&lang=scss&scoped=true&\"\nimport style1 from \"./AddCasePage.vue?vue&type=style&index=1&id=6361bdfc&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6361bdfc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCasePage.vue?vue&type=style&index=0&id=6361bdfc&prod&lang=scss&scoped=true&\""],"sourceRoot":""}