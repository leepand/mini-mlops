(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53fe7202"],{3293:function(e,t,a){"use strict";a("6b58")},"6b58":function(e,t,a){},8872:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{"margin-left":"15px","margin-right":"15px"}},[a("el-divider"),a("el-descriptions",{staticClass:"margin-top",attrs:{title:"",column:3,size:e.size}},[a("template",{slot:"title"},[a("span",[e._v(e._s(e.expMetaData.name))])]),a("template",{slot:"extra"},[a("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"活动管理",params:{campaign_id:this.$route.params.campaign_id}}}},[a("el-button",{staticClass:"return-list"},[a("i",{staticClass:"el-icon-arrow-left",staticStyle:{"margin-right":"5px"}}),e._v("返回活动管理")])],1)],1),a("el-descriptions-item",{attrs:{label:"所属活动ID"}},[e._v(e._s(e.expMetaData.data_campaign_id))]),a("el-descriptions-item",{attrs:{label:"创建时间"}},[e._v(e._s(e.expMetaData.creation_date))]),a("el-descriptions-item",{attrs:{label:"实验类型"}},[a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.expMetaData.app_type))])],1)],2),a("el-collapse",{staticStyle:{"margin-bottom":"20px"},on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"实验组创建及策略配置",name:"1"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"活动管理",params:{campaign_id:this.$route.params.campaign_id}}}},[a("el-button",{staticClass:"return-list",staticStyle:{float:"right"}},[e._v("取消")])],1),a("el-button",{staticClass:"return-list",staticStyle:{float:"right","margin-right":"15px"},attrs:{type:"primary"},nativeOn:{click:function(t){return e.addNewExp(t)}}},[e._v("保存")])],1),a("br"),a("el-col",{staticStyle:{"padding-bottom":"20px"},attrs:{span:24}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.FormRules}},[a("div",{staticStyle:{border:"1px solid #e6e6e6","margin-bottom":"10px",padding:"15px"}},[a("p",{staticStyle:{"margin-bottom":"0"}},[e._v("测试您的产品的多种变化。")]),a("p",[e._v(" 注意：确保你的曝光率加起来是100%，并且你选择了一个基本的变体（出错的时候会统统发送给它）。")]),a("br"),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:22}},[a("el-table",{ref:"multipleHeadTable",attrs:{data:e.form.modelData,"highlight-current-row":""},on:{"selection-change":e.selsExp}},[a("el-table-column",{attrs:{"label-class-name":"出错时将只向选择实例发送请求","render-header":e.openAnnotation,type:"selection","min-width":"5%",label:"默认"}}),a("el-table-column",{attrs:{prop:"expName",label:"曝光实例","min-width":"30%","label-class-name":"曝光的实验实例名称","render-header":e.openAnnotation},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{value:t.row.expName,placeholder:"请输入实例名称"},model:{value:t.row.expName,callback:function(a){e.$set(t.row,"expName","string"===typeof a?a.trim():a)},expression:"scope.row.expName"}})]}}])}),a("el-table-column",{attrs:{prop:"exposureNum",label:"曝光率(%)","min-width":"20%","label-class-name":"各实例曝光比例","render-header":e.openAnnotation},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{value:t.row.exposureNum,type:"number",placeholder:"请输入曝光率"},on:{input:function(a){return e.inputChange(t.row)}},model:{value:t.row.exposureNum,callback:function(a){e.$set(t.row,"exposureNum",a)},expression:"scope.row.exposureNum"}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"已部署模型","min-width":"30%","label-class-name":"根据增强模型动态生成选择模型并返回结果。如果指定了 '无模型'，则返回实例名称","render-header":e.openAnnotation},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{value:t.row.name,placeholder:"请输入模型"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name","string"===typeof a?a.trim():a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{label:"","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px",cursor:"pointer"},on:{click:function(a){return e.delModelHead(t.$index)}}})]}}])}),a("el-table-column",{staticStyle:{"margin-right":"6px"},attrs:{label:"","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index===e.form.modelData.length-1?a("el-button",{staticClass:"el-icon-plus",attrs:{size:"mini"},on:{click:e.addModelHead}}):e._e()]}}])})],1)],1)],1)],1)])],1)],1)],1)],1)},i=[],n=(a("a481"),a("4f7f"),a("5df3"),a("1c4c"),a("7f7f"),a("ac6a"),a("c5f6"),a("4ec3")),o=a("1157"),r=a.n(o),l={data:function(){return{expMetaData:{},activeNames:["1"],groupData:[],apiListLoading:!1,baseExpSelected:[],oldNum:50,ABTypeSelected:"mlExp",activeIndex:"",searchApiList:[],searchApiListG:{},radio:"mlExp",page:1,total:0,searchApiVisible:!1,ApiList:[],showCheck:!1,sels:[],interrelateObjects:"",form:{abname:"",description:"",modelData:[{expName:"",name:"No Model",exposureNum:50}]},FormRules:{name:[{required:!0,message:"请输入实验用例名称",trigger:"blur"}],altlist:[{required:!0,message:"请输入待测试的模型列表",trigger:"blur"}]}}},methods:{inputChange:function(e){console.log(e,"obj")},addModelHead:function(){var e={name:"No Model",exposureNum:50,expName:"control"};this.form.modelData.push(e)},delModelHead:function(e){1!==this.form.modelData.length&&this.form.modelData.splice(e,1)},handleSelect:function(e,t){this.activeIndex=e,console.log(this.activeIndex)},handleCurrentChangeApi:function(e){this.activeIndex["id"],this.page=e,this.getApiList()},getExpMeta:function(){var e=this;r.a.ajax({type:"get",url:n["I"]+"/api/campaigns/get_exp_metadata",async:!0,data:{ab_id:this.$route.params.ab_id,campaign_id:this.$route.params.campaign_id},headers:{Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(t){"999999"===t.code?(e.expMetaData=t.data.data,console.log(e.expMetaData,"this.expMetaData")):e.$message.error({message:t.msg,center:!0})}})},getApiList:function(e){this.apiListLoading=!0;var t=this,a={project_id:Number(this.$route.params.project_id),page:t.page};e&&(a["apiGroupLevelFirst_id"]=Number(e)),r.a.ajax({type:"get",url:n["I"]+"/api/api/api_list",async:!0,data:a,headers:{Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){t.apiListLoading=!1,"999999"===e.code?(t.searchApiList=e.data.data,t.total=e.data.total,console.log(t.searchApiList,"searchApiList")):t.$message.error({message:e.msg,center:!0})}})},handleCurrentChange:function(e){this.currentRow=e},selsExp:function(e){this.baseExpSelected=e},selsChange:function(e){var t=this;this.sels=e,1===e.length&&""===this.form.modelData[0].expName&&this.form.modelData.splice(0,1),e.forEach((function(e){e.exposureNum=50,e.expName=e.name,t.form.modelData.push(e),t.form.modelData=Array.from(new Set(t.form.modelData))})),console.log(this.sels,"this.sels")},addNewExp:function(){var e=this,t=this;console.log(t.form,"sd",t.baseExpSelected,"sfkk",t.form.modelData),this.$refs.form.validate((function(t){if(t){var a=e;e.$confirm("确认提交实验吗？","提示",{}).then((function(){var e=JSON.stringify({campaign_id:Number(a.$route.params.campaign_id),ab_id:Number(a.$route.params.ab_id),expRegData:a.form.modelData,baseExpSelected:a.baseExpSelected});r.a.ajax({type:"post",url:n["I"]+"/api/campaigns/add_exp_alt",async:!0,data:e,headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){"999999"===e.code?(a.$router.push({name:"活动管理",params:{campaign_id:a.$route.params.campaign_id,ab_id:a.$route.params.ab_id}}),a.$message({message:"保存成功",center:!0,type:"success"})):a.$message.error({message:e.msg,center:!0})}})})).catch((function(){}))}}))},changABType:function(e){this.ABTypeSelected=e,console.log(e,"abval")},handleChange:function(e){},openAnnotation:function(e,t){var a=t.column;t.$index;return e("el-tooltip",{class:"item",attrs:{effect:"dark",content:a.labelClassName,placement:"top"}},[e("span",[a.label])])}},watch:{radio:function(e){this.changABType(e)},form:{handler:function(e,t){"no_check"===e.check?this.showCheck=!1:this.showCheck=!0},deep:!0}},computed:{exposureNumSelected:{get:function(){return this.oldNum},set:function(e){this.oldNum=e.replace(/[^\d]/g,"")}}},mounted:function(){this.getExpMeta(),this.searchApiListVisible=!0}},c=l,p=(a("f0ba"),a("3293"),a("2877")),m=Object(p["a"])(c,s,i,!1,null,"6361bdfc",null);t["default"]=m.exports},db3c:function(e,t,a){},f0ba:function(e,t,a){"use strict";a("db3c")}}]);
//# sourceMappingURL=chunk-53fe7202.025cb010.js.map